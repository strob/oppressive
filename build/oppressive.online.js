var OP={Objection:function(a,b){this._id=a;for(var c in b)this[c]=b[c];OP.Subjectification.obj[this._id]=this}};OP.Objection.prototype.get=function(a){return OP.Subjectification.obj[this[a]]};OP.Objection.prototype.getAll=function(a){return(this[a]||[]).map(function(a){return OP.Subjectification.obj[a]})};OP.Objection.prototype.getDoc=function(){var a={},b;for(b in this)this.hasOwnProperty(b)&&"_id"!==b&&(a[b]=this[b]);return a};OP.Objection.prototype.save=function(){this.onchange()};
OP.Objection.prototype.deleteme=function(){this.ondelete()};OP.Objection.prototype.onchange=function(){};OP.Objection.prototype.ondelete=function(){};OP.Subjectification={obj:{},all:function(a){var b=[],c;for(c in OP.Subjectification.obj)OP.Subjectification.obj[c]instanceof a&&b.push(OP.Subjectification.obj[c]);return b}};OP.ready=function(a){a(OP)};OP.ready=function(a){OP.onload=a};var $socketscript=document.createElement("script");$socketscript.setAttribute("src","/socket.io/socket.io.js");$socketscript.onload=function(){console.log("loaded socket");OP.io=io.connect();if(OP.onload)OP.onload(OP)};console.log("loading socket");document.head.appendChild($socketscript);OP.Subjectification.load=function(a,b){var c=0,d;for(d in a){var c=c+1,e=a[d];OP.io.emit("load",d,function(a){c-=1;for(var d in a)new e(d,a[d]);0==c&&b()})}};
