<html>
  <head>
    <script src="oppressive.js"></script>
  </head>
  <body>
    <script>
OP.ready(function() {
    var ConsumerProduct = function(id, spec) {
        OP.Objection.call(this, id, spec);
    };
    ConsumerProduct.prototype = new OP.Objection;
    ConsumerProduct.prototype.sale = function() {
        this.price *= 0.75;
    };

    OP.Subjectification.load(
        {"ConsumerProducts": ConsumerProduct},
        function() {
            var products = OP.Subjectification.all(ConsumerProduct);
            products.forEach(function(product) {
                alert(product.name + ", $" + product.price);
                product.sale();
                alert("SALE! " + product.name + ", now only $" + product.price);
            });
        });
});
    </script>
  </body>
</html>
